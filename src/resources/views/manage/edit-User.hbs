<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="text-center">
        <h1>Register</h1>
      </div>
      <div class="main-content-agile mt-4">
        <div class="sub-main-w3">
          <form action="/manage/{{user._id}}?_method=PUT" method="post"> 
                <div class="form-group">
                  <div class="input-group">
                    <input placeholder="Name" name="name" id="name" value='{{user.name}}' class="form-control" type="text" required>
                    <div class="input-group-append">
                      <div class="input-group-text">
                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512">
                          <path d="M304 128a80 80 0 1 0 -160 0 80 80 0 1 0 160 0zM96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM49.3 464H398.7c-8.9-63.3-63.3-112-129-112H178.3c-65.7 0-120.1 48.7-129 112zM0 482.3C0 383.8 79.8 304 178.3 304h91.4C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3z"/>
                        </svg>
                      </div>
                    </div>
                  </div>
                  <small id="name-error" class="form-text text-danger"></small>
                </div>
                <div class="form-group">
                  <div class="input-group">
                    <input placeholder="UserName" name="username" id="username" value="{{user.username}}" class="form-control" type="text" required>
                    <div class="input-group-append">
                      <div class="input-group-text">
                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512">
                          <path d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3
                          29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"/>
                        </svg>
                      </div>
                    </div>
                  </div>
                  <small id="username-error" class="form-text text-danger"></small>
                </div>
                <div class="form-group">
                  <div class="input-group">
                    <input type="password" class="form-control" name="password" id="password" placeholder="Password" required>
                    <div class="input-group-append">
                      <div class="input-group-text">
                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512">
                          <path d="M144 144c0-44.2 35.8-80 80-80c31.9 0 59.4 18.6 72.3 45.7c7.6 16 26.7 22.8 42.6 15.2s22.8-26.7 15.2-42.6C331 33.7 281.5 0 224 0C144.5
                          0 80 64.5 80 144v48H64c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V256c0-35.3-28.7-64-64-64H144V144z"/>
                        </svg>
                      </div>
                    </div>
                  </div>
                  <small id="password-error" class="form-text text-danger"></small>
                </div>
                <div class="form-group">
                  <div class="input-group">
                    <input type="password" class="form-control" id="confirm-password" placeholder="Confirm Password"required>
                    <div class="input-group-append">
                      <div class="input-group-text">
                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512">
                         <path d="M224 64c-44.2 0-80 35.8-80 80v48H384c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80V144C80 64.5 144.5 0 224 0c57.5 0 107 33.7 130.1 82.3c7.6 16 .8 35.1-15.2 42.6s-35.1 .8-42.6-15.2C283.4 82.6 255.9 64 224 64zm32 320c17.7 0 32-14.3 32-32s-14.3-32-32-32H192c-17.7 0-32 14.3-32 32s14.3 32 32 32h64z"/>
                        </svg>
                      </div>
                    </div>
                  </div>
                  <small id="password-confirm-error" class="form-text text-danger"></small>
                </div>
                <div class="form-group">
                  <div class="d-flex justify-content-center align-items-center">
                    <div>
                        <input type="submit" value="Udate" id="submit-btn" class="btn btn-primary" disabled>
                    </div>
                  </div>
                </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
var nameInput = document.getElementById("name");
var usernameInput = document.getElementById("username");
var passwordInput = document.getElementById("password");
var confirmpasswordInput = document.getElementById("confirm-password");
var nameerror = document.getElementById("name-error");
var usernameerror = document.getElementById("username-error");
var passworderror = document.getElementById("password-error");
var confirmpassworderror = document.getElementById("password-confirm-error");
var submitBtn = document.getElementById("submit-btn");

nameInput.addEventListener("input", validatename);
usernameInput.addEventListener("input", validate);
passwordInput.addEventListener("input", validate);
confirmpasswordInput.addEventListener("input", validate);

function validatename() {
  var name = nameInput.value;
  var username = usernameInput.value;
  var password = passwordInput.value;
  var confirmpassword = confirmpasswordInput.value;

  if (!name) {
    if (!username) {
      if (!password) {
        if (!confirmpassword) {
          nameerror.textContent = "";
          usernameerror.textContent = "";
          passworderror.textContent = "";
          confirmpassworderror.textContent = "";
          submitBtn.disabled = true;
        } else {
          nameerror.textContent = "Name không được trống";
          usernameerror.textContent = "UserName không được trống";
          passworderror.textContent = "Password không được trống";
          confirmpassworderror.textContent = "";
          submitBtn.disabled = true;
        }
      } else {
        nameerror.textContent = "Name không được trống";
        usernameerror.textContent = "UserName không được trống";
        submitBtn.disabled = true;
      }
    } else {
      usernameerror.textContent = "";
      nameerror.textContent = "Name không được trống";
      submitBtn.disabled = true;
      }
  } else if (username && (password === confirmpassword) ){
      nameerror.textContent = "";
      submitBtn.disabled = false;
    }
}
function validate() {
  var name = nameInput.value;
  var username = usernameInput.value;
  var password = passwordInput.value;
  var confirmpassword = confirmpasswordInput.value;

  if (!confirmpassword) {
    if (!password) {
      if (!name) {
        if (!username) {
          nameerror.textContent = "";
          usernameerror.textContent = "";
          passworderror.textContent = "";
          confirmpassworderror.textContent = "";
          submitBtn.disabled = true;
        } else {
          passworderror.textContent = "";
          confirmpassworderror.textContent = "";
          usernameerror.textContent = "";
          nameerror.textContent = "Name không được trống";
          submitBtn.disabled = true;
        }
      } else {
        nameerror.textContent = "";
        usernameerror.textContent = "";
        passworderror.textContent = "";
        confirmpassworderror.textContent = "";
        submitBtn.disabled = true;
      }
    } else {
        if (!name) {
          if (!username) {
            nameerror.textContent = "Name Không được trống";
            usernameerror.textContent = "UserName không được trống";
            passworderror.textContent = "";
            confirmpassworderror.textContent = "";
            submitBtn.disabled = true;
          } else {
            passworderror.textContent = "";
            confirmpassworderror.textContent = "";
            usernameerror.textContent = "";
            nameerror.textContent = "Name không được trống";
            submitBtn.disabled = true;
          }
        } else {
            if (!username) {
              nameerror.textContent = "";
              usernameerror.textContent = "UserName không được trống";
              passworderror.textContent = "";
              confirmpassworderror.textContent = "";
              submitBtn.disabled = true;
            } else {
              passworderror.textContent = "";
              confirmpassworderror.textContent = "";
              usernameerror.textContent = "";
              nameerror.textContent = "";
              submitBtn.disabled = true;
            }
          }      
      }
  } else {
      if (!password) {
        if (!name) {
          if (!username) {
            nameerror.textContent = "Name không được trống";
            usernameerror.textContent = "UserName không được trống";
            passworderror.textContent = "Password không được trống";
            confirmpassworderror.textContent = "";
            submitBtn.disabled = true;
          } else {
            usernameerror.textContent = "";
            nameerror.textContent = "Name không được trống";
            passworderror.textContent = "Password không được trống";
            confirmpassworderror.textContent = "";
            submitBtn.disabled = true;
          }
        } else {
            if (!username) {
              nameerror.textContent = "";
              confirmpassworderror.textContent = "";
              usernameerror.textContent = "UserName không được trống";
              passworderror.textContent = "Password không được trống";
              submitBtn.disabled = true;
            } else {
                nameerror.textContent = "";
                confirmpassworderror.textContent = "";
                usernameerror.textContent = "";
                passworderror.textContent = "Password không được trống";
                submitBtn.disabled = true;
              }
          }
      } else {
        if (password !== confirmpassword) {
          if (!name) {
            if (!username) {
              nameerror.textContent = "Name không được trống";
              usernameerror.textContent = "UserName không được trống";
              confirmpassworderror.textContent = "Không chính xác";
              passworderror.textContent = "";
              submitBtn.disabled = true;
            } else {
                nameerror.textContent = "Name không được trống";
                usernameerror.textContent = "";
                confirmpassworderror.textContent = "Không chính xác";
                passworderror.textContent = "";
                submitBtn.disabled = true;
              }
          } else {
            if (!username) {
              nameerror.textContent = "";
              usernameerror.textContent = "UserName không được trống";
              confirmpassworderror.textContent = "Không chính xác";
              passworderror.textContent = "";
              submitBtn.disabled = true;
            } else {
                nameerror.textContent = "";
                usernameerror.textContent = "";
                confirmpassworderror.textContent = "Không chính xác";
                passworderror.textContent = "";
                submitBtn.disabled = true;
              }
          }
        } else {
            if (!name) {
              if (!username) {
                nameerror.textContent = "Name không được trống";
                usernameerror.textContent = "UserName không được trống";
                confirmpassworderror.textContent = "";
                passworderror.textContent = "";
                submitBtn.disabled = true;
              } else {
                  nameerror.textContent = "Name không được trống";
                  usernameerror.textContent = "";
                  confirmpassworderror.textContent = "";
                  passworderror.textContent = "";
                  submitBtn.disabled = true;
                }
            } else {
                if (!username) {
                  nameerror.textContent = "";
                  usernameerror.textContent = "UserName không được trống";
                  confirmpassworderror.textContent = "";
                  passworderror.textContent = "";
                  submitBtn.disabled = true;
                } else {
                    nameerror.textContent = "";
                    usernameerror.textContent = "";
                    confirmpassworderror.textContent = "";
                    passworderror.textContent = "";
                    submitBtn.disabled = false;
                  }
              }
        }
      }
  }
}
</script>